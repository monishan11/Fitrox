<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workout</title>
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: linear-gradient(to bottom, #1e3c72, #2a5298); /* Gradient background */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full viewport height */
        }

        canvas { 
            display: block; 
        }

        #moveButton {
            position: absolute;
            bottom: 10px;
            right: 10px;
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        #moveButton:hover {
            background-color: #0056b3; /* Darker blue on hover */
        }
    </style>
</head>
<body>
    <button id="moveButton">Move</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, track, avatar;
        let segmentCount = 100; // Smoothness of the track
        let avatarProgress = 0; // Start at the beginning
        const totalSegments = 30;

        function init() {
            // Set up scene
            scene = new THREE.Scene();

            // Set up camera
            const aspect = window.innerWidth / window.innerHeight;
            const frustumSize = 20;
            camera = new THREE.OrthographicCamera(
                -frustumSize * aspect / 2, frustumSize * aspect / 2,
                frustumSize / 2, -frustumSize / 2,
                0.1, 1000
            );
            camera.position.z = 10;

            // Set up renderer
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setClearColor(0xFFA07A); // Light green background color
            document.body.appendChild(renderer.domElement);

           // Create the track as a thick tube
        const path = new THREE.CatmullRomCurve3([
            new THREE.Vector3(-15, 0, 0),
            new THREE.Vector3(-10, 5, 0),
            new THREE.Vector3(-5, 0, 0),
            new THREE.Vector3(0, 5, 0),
            new THREE.Vector3(5, 0, 0),
            new THREE.Vector3(10, -5, 0),
            new THREE.Vector3(15, 0, 0)
        ]);

        // Create TubeGeometry with a radius of 0.2
        const tubeGeometry = new THREE.TubeGeometry(path, segmentCount, 0.2, 20, false);
        const tubeMaterial = new THREE.MeshBasicMaterial({ color: 0x999999 });
        track = new THREE.Mesh(tubeGeometry, tubeMaterial);
        scene.add(track);


            // Create the avatar as a 2D circle
            const avatarGeometry = new THREE.CircleGeometry(0.5, 32);
            const avatarMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });
            avatar = new THREE.Mesh(avatarGeometry, avatarMaterial);
            avatar.position.set(-15, 0, 0);
            scene.add(avatar);

            // Button to move the avatar
            document.getElementById('moveButton').addEventListener('click', moveAvatar);

            animate();
        }

        function moveAvatar() {
            if (avatarProgress < 1) {
                avatarProgress += 1 / totalSegments;
                updateAvatarPosition();
            }
        }

        function updateAvatarPosition() {
            const path = new THREE.CatmullRomCurve3([
                new THREE.Vector3(-15, 0, 0),
                new THREE.Vector3(-10, 5, 0),
                new THREE.Vector3(-5, 0, 0),
                new THREE.Vector3(0, 5, 0),
                new THREE.Vector3(5, 0, 0),
                new THREE.Vector3(10, -5, 0),
                new THREE.Vector3(15, 0, 0)
            ]);

            const pointOnPath = path.getPointAt(avatarProgress);
            avatar.position.set(pointOnPath.x, pointOnPath.y, 0);
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>
